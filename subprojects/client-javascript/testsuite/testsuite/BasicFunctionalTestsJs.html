<!DOCTYPE html>
<html>
<head>
    <title>Basic Functional Tests</title>
    <script src="../libs/require.js"></script>
</head>
<body>
<h1>Basic Functional Tests written with inline JavaScript</h1>

<p>Enter text here to see the instant update of the connected labels:<br>
<input id="instant-update-input" type="text"></p>

<p>Instantly updated label from the same Attribute: <br>
<div id="instant-update-label" style="font-size: 1.2em;">unchanged</div></p>

<p>Instantly updated label from the an Attribute with the same qualifier: <br>
<div id="qualified-label" style="font-size: 1.2em;">unchanged</div></p>

<script>

require([
        '../js/dolphin/ClientAttribute',
        '../js/dolphin/ClientDolphin',
        '../js/dolphin/ClientModelStore',
        '../js/dolphin/ClientConnector',
        '../js/dolphin/NoTransmitter'
    ],
    function (cat, dol, mst, cc, ntm) {

    // setting up the dolphin
    var dolphin = new dol.dolphin.ClientDolphin();
    var connector = new cc.dolphin.ClientConnector(new ntm.dolphin.NoTransmitter());
    dolphin.setClientConnector(connector);
    dolphin.setClientModelStore(new mst.dolphin.ClientModelStore(dolphin));

    // make a presentation model
    var instantUpdateAttribute = new cat.dolphin.ClientAttribute("instant-update", "same-qualifier");
    var qualifiedAttribute = new cat.dolphin.ClientAttribute("qualified-update", "same-qualifier");

    dolphin.presentationModel(undefined, undefined, instantUpdateAttribute);
    dolphin.presentationModel(undefined, undefined, qualifiedAttribute);

    // binding
    var instantUpdateInput = document.getElementById("instant-update-input");
    var instantUpdateLabel = document.getElementById("instant-update-label");
    var qualifiedLabel = document.getElementById("qualified-label");

    instantUpdateInput.oninput = function (event) {
        instantUpdateAttribute.setValue(instantUpdateInput.value);
    };
    instantUpdateAttribute.onValueChange(function (event) {
        instantUpdateLabel.innerHTML = event.newValue;
    });
    qualifiedAttribute.onValueChange(function (event) {
        qualifiedLabel.innerHTML = event.newValue;
    });
});
</script>


</body>
</html>